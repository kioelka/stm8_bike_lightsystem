Here is firmware for my bike light controller based on STM8 chip.
Controller has 4 buttons and 4 light directions.
Front and back light directly connedted to their buttons (Button -> MCU -> Light)
Rotation ligts blink (interval defined)
